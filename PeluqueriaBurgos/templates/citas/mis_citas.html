{% extends 'base.html' %}

{% block title %}Mis citas - Peluquería Burgos{% endblock title %}

{% block content %}
<div class="container-salon py-5">
    <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 fade-in">
        <div>
            <h2 class="mb-1">Mis Citas</h2>
            <p class="text-muted mb-0">Gestiona tus próximas visitas a Peluquería Burgos.</p>
        </div>
        <a href="{% url 'cita_nueva' %}" class="btn-gold mt-3 mt-md-0" style="padding: 0.8rem 2rem;">
            <i class="fas fa-plus me-2"></i>Nueva Cita
        </a>
    </div>

    <div class="bg-white rounded shadow-sm fade-in" style="animation-delay: 0.1s; border-radius: 12px;">
        <div class="p-0">
            {% if citas %}
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead style="background-color: var(--color-sand); border-bottom: 2px solid var(--color-taupe);">
                        <tr>
                            <th class="ps-4 py-3 text-uppercase small fw-semibold"
                                style="color: var(--color-charcoal);">Fecha</th>
                            <th class="py-3 text-uppercase small fw-semibold" style="color: var(--color-charcoal);">Hora
                            </th>
                            <th class="py-3 text-uppercase small fw-semibold" style="color: var(--color-charcoal);">
                                Servicio</th>
                            <th class="py-3 text-uppercase small fw-semibold" style="color: var(--color-charcoal);">
                                Profesional</th>
                            <th class="py-3 text-uppercase small fw-semibold" style="color: var(--color-charcoal);">
                                Estado</th>
                            <th class="pe-4 py-3 text-end text-uppercase small fw-semibold"
                                style="color: var(--color-charcoal);">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for cita in citas %}
                        <tr style="border-bottom: 1px solid rgba(212, 196, 176, 0.2);">
                            <td class="ps-4 py-3 fw-bold text-gold">{{ cita.fecha|date:"d M Y" }}</td>
                            <td class="py-3">{{ cita.hora|time:"H:i" }}</td>
                            <td class="py-3 text-gold">{{ cita.servicio.nombre }}</td>
                            <td class="py-3">{{ cita.peluquero.nombre }} {{ cita.peluquero.apellido }}</td>
                            <td class="py-3">
                                {% if cita.estado == 'PENDIENTE' %}
                                <span class="badge rounded-pill px-3 py-2"
                                    style="background-color: var(--color-gold); color: white;">Pendiente</span>
                                {% elif cita.estado == 'REALIZADA' %}
                                <span class="badge bg-success rounded-pill px-3 py-2">Realizada</span>
                                {% else %}
                                <span class="badge bg-secondary rounded-pill px-3 py-2">Cancelada</span>
                                {% endif %}
                            </td>
                            <td class="pe-4 py-3 text-end">
                                {% if cita.estado == 'PENDIENTE' %}
                                <a href="{% url 'cita_editar' cita.pk %}" class="btn btn-sm me-1"
                                    style="background-color: var(--color-sand); color: var(--color-charcoal); border-radius: 8px; padding: 0.4rem 0.8rem;"
                                    title="Editar">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="{% url 'cita_cancelar' cita.pk %}" class="btn btn-sm btn-outline-danger"
                                    style="border-radius: 8px; padding: 0.4rem 0.8rem;" title="Cancelar">
                                    <i class="fas fa-times"></i>
                                </a>
                                {% else %}
                                <span class="text-muted small">Sin acciones</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-5 px-3">
                <div class="mb-4" style="font-size: 4rem; color: var(--color-sand);">
                    <i class="far fa-calendar-times"></i>
                </div>
                <h5 class="mb-2" style="color: var(--color-charcoal);">No tienes citas programadas</h5>
                <p class="text-muted mb-4">¡Es un buen momento para renovar tu look!</p>
                <a href="{% url 'cita_nueva' %}" class="btn-gold">
                    Reservar ahora
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}